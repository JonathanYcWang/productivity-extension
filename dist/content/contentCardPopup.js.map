{"version":3,"file":"contentCardPopup.js","sources":["../../src/content/cardPopup.ts"],"sourcesContent":["// Content script to inject card popup on pages\nimport { runtime } from \"../lib/browser-api\";\n\nconst POPUP_ID = 'productivity-blocker-card-popup';\n\nexport function showCardPopup() {\n  // Remove existing popup if present\n  const existing = document.getElementById(POPUP_ID);\n  if (existing) {\n    existing.remove();\n  }\n\n  // Create popup container\n  const popup = document.createElement('div');\n  popup.id = POPUP_ID;\n  popup.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 999999;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;\n  `;\n\n  // Create iframe for the popup content\n  const iframe = document.createElement('iframe');\n  iframe.style.cssText = `\n    width: 90%;\n    max-width: 800px;\n    height: 90%;\n    max-height: 600px;\n    border: none;\n    border-radius: 12px;\n    background: white;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  `;\n  \n  // Get the extension URL for the popup HTML\n  const popupUrl = runtime.getURL('cardPopup/index.html');\n  iframe.src = popupUrl;\n  \n  popup.appendChild(iframe);\n\n  // Close on background click\n  popup.addEventListener('click', (e) => {\n    if (e.target === popup) {\n      popup.remove();\n    }\n  });\n\n  // Add to page\n  document.body.appendChild(popup);\n\n  // Listen for close messages from iframe\n  window.addEventListener('message', (event) => {\n    const extensionOrigin = runtime.getURL('').slice(0, -1);\n    if (event.data === 'closeCardPopup' && event.origin === extensionOrigin) {\n      popup.remove();\n    }\n  });\n}\n\n// Listen for messages from background script\nif (runtime.onMessage) {\n  runtime.onMessage.addListener((message: any, sender: any, sendResponse: any) => {\n    if (message.action === 'showCardPopup') {\n      showCardPopup();\n      sendResponse({ success: true });\n    }\n    return true;\n  });\n}\n\n"],"names":["POPUP_ID","showCardPopup","existing","popup","iframe","popupUrl","runtime","e","event","extensionOrigin","message","sender","sendResponse"],"mappings":"6CAGA,MAAMA,EAAW,kCAEV,SAASC,GAAgB,CAE9B,MAAMC,EAAW,SAAS,eAAeF,CAAQ,EAC7CE,GACFA,EAAS,OAAA,EAIX,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,GAAKH,EACXG,EAAM,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAetB,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAYvB,MAAMC,EAAWC,EAAQ,OAAO,sBAAsB,EACtDF,EAAO,IAAMC,EAEbF,EAAM,YAAYC,CAAM,EAGxBD,EAAM,iBAAiB,QAAUI,GAAM,CACjCA,EAAE,SAAWJ,GACfA,EAAM,OAAA,CAEV,CAAC,EAGD,SAAS,KAAK,YAAYA,CAAK,EAG/B,OAAO,iBAAiB,UAAYK,GAAU,CAC5C,MAAMC,EAAkBH,EAAQ,OAAO,EAAE,EAAE,MAAM,EAAG,EAAE,EAClDE,EAAM,OAAS,kBAAoBA,EAAM,SAAWC,GACtDN,EAAM,OAAA,CAEV,CAAC,CACH,CAGIG,EAAQ,WACVA,EAAQ,UAAU,YAAY,CAACI,EAAcC,EAAaC,KACpDF,EAAQ,SAAW,kBACrBT,EAAA,EACAW,EAAa,CAAE,QAAS,GAAM,GAEzB,GACR"}