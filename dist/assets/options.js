import{a as u,j as e,R as ie}from"./common.js";import{D as _}from"./types.js";import{s as p,r as k}from"./browser-api.js";function Y(s){try{let c=s.replace(/^https?:\/\//i,"");return c=c.split("/")[0].split("?")[0].split("#")[0],c=c.split(":")[0],c=c.replace(/^www\./i,""),c=c.trim(),c}catch{return s.replace(/^https?:\/\//i,"").replace(/\/.*$/,"").replace(/\?.*$/,"").replace(/#.*$/,"").replace(/:.*$/,"").replace(/^www\./i,"").trim()}}function K(s,c){if(s.length===0)return{type:"bonusRerolls",bonusRerolls:1};if(Math.random()<.1)return{type:"bonusRerolls",bonusRerolls:1};{const m=Math.floor(Math.random()*s.length),x=s[m],b=c[x]||[];let a;if(b.length>0){const o=Math.floor(Math.random()*b.length);a=b[o]}else a=Math.floor(Math.random()*116)+5;return{type:"domain",domain:x,durationMinutes:a}}}const H="cardGambleRerollState",ee=30,de=60,A=3;function J(){const s=Math.floor(Math.random()*(de-ee+1))+ee;return Date.now()+s*60*1e3}function ue({domains:s,domainDurations:c={},resetKey:R}){const[m,x]=u.useState([]),[b,a]=u.useState(!1),[o,d]=u.useState(null),[i,T]=u.useState(0),[h,y]=u.useState(A),[f,j]=u.useState(null),[C,E]=u.useState(null),[$,L]=u.useState(0),[O,ne]=u.useState(!0),[v,S]=u.useState(!1),[M,F]=u.useState(null),[te,W]=u.useState(0),[I,U]=u.useState(null),[V,G]=u.useState([0,0,0]),[N,X]=u.useState(!1);u.useEffect(()=>{if((async()=>{try{const{settings:n}=await p.sync.get("settings");if(n){const l=(n.mode||"scheduled")==="focus"&&(n.focusTimeEnd||n.focusTimePaused&&n.focusTimePaused>0);X(l)}}catch(n){console.error("Error checking focus time:",n)}})(),p.onChanged){const n=(t,l)=>{if(l==="sync"&&t.settings){const w=t.settings.newValue;if(w){const D=(w.mode||"scheduled")==="focus"&&(w.focusTimeEnd||w.focusTimePaused&&w.focusTimePaused>0);X(D)}}};return p.onChanged.addListener(n),()=>{p.onChanged&&"removeListener"in p.onChanged&&p.onChanged.removeListener(n)}}},[]),u.useEffect(()=>{(async()=>{try{const{[H]:n}=await p.local.get(H);if(n){const t=n,l=Date.now();if(t.rerollResetTime&&t.rerollResetTime<=l)y(A),j(null),S(!1),d(null),await p.local.remove(H);else{if(y(t.availableRerolls??A),j(t.rerollResetTime),E(t.rerollResetTimePaused??null),t.cards&&t.cards.length>0){if(x(t.cards),d(t.selectedCard??null),S(t.cardsLocked??!1),a(t.showCards??!0),T(t.animationKey??0),t.selectedCardExpiresAt)F(t.selectedCardExpiresAt);else if(t.selectedCard!==null&&t.selectedCard!==void 0){const w=t.cards[t.selectedCard];if(w&&w.type==="domain"&&w.domain)try{const g=await k.sendMessage({action:"getActiveUnblocks"});if(g&&g.success&&g.unblocks){const D=Y(w.domain).toLowerCase(),P=g.unblocks.find(ce=>Y(ce.domain).toLowerCase()===D);P&&F(P.expiresAt)}}catch(g){console.error("Error fetching active unblocks on load:",g)}}}if(t.rerollResetTime&&t.rerollResetTime>l&&S(!0),t.rerollResetTime&&t.rerollResetTime>l)try{k.sendMessage({action:"scheduleRerollReset",resetTime:t.rerollResetTime})}catch(w){console.error("Error scheduling reroll reset:",w)}}}else(async()=>{try{const{settings:l}=await p.sync.get("settings");if(((l==null?void 0:l.mode)||"scheduled")==="focus"&&((l==null?void 0:l.focusTimeEnd)||(l==null?void 0:l.focusTimePaused)&&l.focusTimePaused>0)){const D=J();j(D),y(A),S(!0),a(!1);try{await k.sendMessage({action:"scheduleRerollReset",resetTime:D})}catch(P){console.error("Error scheduling initial reroll reset:",P)}}else y(A),S(!0),a(!1),j(null)}catch(l){console.error("Error checking focus time for initialization:",l)}})()}catch(n){console.error("Error loading reroll state:",n)}finally{ne(!1)}})()},[]),u.useEffect(()=>{if(O)return;(async()=>{try{const n={availableRerolls:h,rerollResetTime:f,rerollResetTimePaused:C,lastCardGeneration:Date.now(),cards:m,selectedCard:o,cardsLocked:v,showCards:b,animationKey:i,selectedCardExpiresAt:M};await p.local.set({[H]:n})}catch(n){console.error("Error saving reroll state:",n)}})()},[h,f,C,m,o,v,b,i,M,O]),u.useEffect(()=>{if(R===void 0)return;(async()=>{y(A),j(null),S(!1),d(null),L(0),F(null),U(null),E(null),await p.local.remove(H);try{k.sendMessage({action:"cancelRerollReset"})}catch(n){console.error("Error canceling reroll reset:",n)}if(s.length>0){const n=Array.from({length:3},()=>K(s,c));x(n),G([0,0,0]),T(t=>t+1),a(!1),setTimeout(()=>{a(!0)},50)}})()},[R]),u.useEffect(()=>{if(N&&!f&&!M&&!O){if(!(!v&&m.length>0)){const n=J();j(n),S(!0),a(!1),x([]),y(A),k.sendMessage({action:"scheduleRerollReset",resetTime:n}).catch(t=>{console.error("Error scheduling reroll reset:",t)})}}else N||(f&&!M&&(j(null),E(null),k.sendMessage({action:"cancelRerollReset"}).catch(r=>{console.error("Error canceling reroll reset:",r)})),o===null&&(S(!0),a(!1),x([]),L(0)))},[N,f,M,O,v,m.length,o]),u.useEffect(()=>{if(!N){L(0),f||S(!0);return}if(M&&o!==null){L(0);return}if(!f){L(0),v&&m.length===0&&S(!0);return}S(!0);const r=()=>{const t=Date.now(),l=Math.max(0,f-t);if(L(l),l===0){if(y(A),j(null),E(null),L(0),S(!1),d(null),F(null),U(null),(async()=>{try{const{settings:g}=await p.sync.get("settings");if(g&&g.mode==="focus"&&g.focusTimeEnd){const D=Date.now(),P=Math.max(0,g.focusTimeEnd-D);P>0&&await p.sync.set({settings:{...g,focusTimePaused:P,focusTimeEnd:void 0}})}}catch(g){console.error("Error pausing focus timer for card selection:",g)}})(),k.openOptionsPage().catch(g=>{console.error("Error opening options page:",g)}),s.length>0){const g=Array.from({length:3},()=>K(s,c));x(g),G([0,0,0]),T(D=>D+1),a(!1),setTimeout(()=>{a(!0)},50)}p.local.remove(H).catch(console.error)}};r();const n=setInterval(r,1e3);return()=>clearInterval(n)},[N,f,C,M,o,h,s,c,v,m.length]);const oe=r=>{h<=0||(G(n=>{const t=[...n];return t[r]=(t[r]||0)+1,t}),setTimeout(()=>{x(n=>{const t=[...n];return t[r]=K(s,c),t})},50),y(n=>n-1))},re=async r=>{if(o!==null||v)return;const n=m[r];if(n){if(n.type==="bonusRerolls"&&n.bonusRerolls){y(t=>t+n.bonusRerolls),x(t=>{const l=[...t];return l[r]=K(s,c),l});return}if(d(r),S(!0),y(0),f){const t=Date.now(),l=Math.max(0,f-t);if(l>0){E(l),j(null);try{await k.sendMessage({action:"cancelRerollReset"})}catch(w){console.error("Error canceling reroll reset:",w)}}}else E(null);if(n.type==="domain"&&n.domain&&n.durationMinutes){const t=Date.now()+n.durationMinutes*60*1e3;F(t);try{const{settings:l}=await p.sync.get("settings");if(l&&l.mode==="focus"&&l.focusTimeEnd){const w=Date.now(),g=Math.max(0,l.focusTimeEnd-w);g>0&&await p.sync.set({settings:{...l,focusTimePaused:g,focusTimeEnd:void 0}})}}catch(l){console.error("Error pausing focus timer:",l)}try{await k.sendMessage({action:"temporaryUnblock",domain:n.domain,expiresAt:t,durationMinutes:n.durationMinutes})}catch(l){console.error("Error sending unblock message:",l)}}}};u.useEffect(()=>{if(!M){W(0);return}const r=()=>{const t=Date.now(),l=Math.max(0,M-t);W(l),l===0&&o!==null&&(U(o),d(null),F(null),q(),Q())};r();const n=setInterval(r,1e3);return()=>clearInterval(n)},[M,o]);const z=r=>{if(r<=0)return"00:00";const n=Math.floor(r/1e3),t=Math.floor(n/60),l=n%60;return`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},ae=r=>{if(r<=0)return"Expired";const n=Math.floor(r/1e3),t=Math.floor(n/3600),l=Math.floor(n%3600/60),w=n%60;return t>0?`${t}:${l.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`:`${l}:${w.toString().padStart(2,"0")}`},q=async()=>{try{const{settings:r}=await p.sync.get("settings");if(r&&r.mode==="focus"&&r.focusTimePaused){const t=Date.now()+r.focusTimePaused;await p.sync.set({settings:{...r,focusTimeEnd:t,focusTimePaused:void 0}})}}catch(r){console.error("Error resuming focus timer:",r)}},Q=()=>{if(S(!0),a(!1),x([]),y(A),U(null),C!==null&&C>0){const n=Date.now()+C;j(n),E(null),k.sendMessage({action:"scheduleRerollReset",resetTime:n}).catch(t=>{console.error("Error scheduling reroll reset:",t)})}else{const r=J();j(r),E(null),k.sendMessage({action:"scheduleRerollReset",resetTime:r}).catch(n=>{console.error("Error scheduling reroll reset:",n)})}},le=async()=>{if(o===null)return;const r=m[o];if(!(!r||r.type!=="domain"||!r.domain))try{await k.sendMessage({action:"cancelTemporaryUnblock",domain:r.domain}),W(0),U(o),d(null),F(null),q(),Q()}catch(n){console.error("Error canceling unblock:",n)}};if(s.length===0)return null;const Z=h>0;return e.jsxs("div",{className:"card-gamble-container",children:[e.jsx("h2",{children:"Gamble for Unblock Time"}),e.jsxs("p",{className:"card-gamble-description",children:["Three cards will drop down. Each card can show either a domain with unblock duration or bonus re-roll. Bonus re-roll cards have a 10% chance to appear. You start with ",A," re-roll","s"," and can earn more by selecting bonus re-roll cards. Then select one card."]}),e.jsxs("div",{className:"reroll-counter-container",children:[h>0&&!v&&e.jsxs("div",{className:"reroll-counter",children:[e.jsxs("span",{className:"reroll-counter-label",children:["Re-roll",h!==1?"s":""," available:"]}),e.jsx("span",{className:"reroll-counter-value",children:h})]}),$>0&&(v||m.length===0)&&e.jsxs("div",{className:"reroll-timer",children:["Next selection in: ",e.jsx("span",{className:"timer-value",children:z($)})]})]}),e.jsxs("div",{className:`cards-wrapper ${v&&o===null||!N?"disabled":""} ${m.length>0?"has-cards":""} ${o!==null?"card-selected":""}`,children:[m.length===0&&v&&!N&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666",width:"100%"},children:[e.jsx("p",{children:"No selection available"}),e.jsx("p",{children:"Start focus time to begin"})]}),m.length===0&&v&&N&&$>0&&o===null&&!M&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#666",width:"100%"},children:[e.jsx("p",{children:"No selection available"}),e.jsxs("p",{children:["Next selection in: ",e.jsx("strong",{children:z($)})]})]}),m.map((r,n)=>e.jsxs("div",{className:"card-wrapper",children:[e.jsxs("div",{className:`gamble-card ${b||V[n]>0?"card-drop":""} ${o===n&&I!==n?"card-clicked":""} ${I===n||o!==n&&(v||I!==null||!N)?"card-disabled":""} ${o===null&&!v&&I===null&&N?"card-clickable":""}`,style:{animationDelay:`${n*.2}s`},onClick:()=>o===null&&!v&&I===null&&N&&re(n),children:[o===n&&I!==n&&e.jsx("div",{className:"card-selected-banner",children:"SELECTED"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"card-domain",children:r.type==="domain"&&r.domain?Y(r.domain):r.type==="bonusRerolls"?"BONUS RE-ROLL":""})}),e.jsx("div",{className:"card-symbol",children:r.type==="domain"?"â±ï¸":"ðŸŽ"}),e.jsxs("div",{className:"card-body",children:[r.type==="domain"&&r.durationMinutes?e.jsxs("div",{className:"card-duration",children:[r.durationMinutes," ",r.durationMinutes===1?"minute":"minutes"]}):r.type==="bonusRerolls"&&r.bonusRerolls?e.jsx("div",{className:"card-bonus-rerolls",children:"+1 re-roll"}):null,o===n&&I!==n&&e.jsx("div",{className:"card-selected-message",children:r.type==="domain"&&r.durationMinutes?e.jsxs("div",{className:"card-selected-content",children:[e.jsxs("div",{className:"card-selected-text",children:["âœ“ Selected! Unblocked for: ",e.jsx("span",{className:"card-countdown",children:ae(te)})]}),e.jsx("button",{className:"cancel-unblock-card-button",onClick:t=>{t.stopPropagation(),le()},title:"Cancel this unblock",children:"Cancel"})]}):r.type==="bonusRerolls"&&r.bonusRerolls?e.jsx(e.Fragment,{children:"âœ“ Bonus applied! You gained 1 re-roll!"}):null}),o===null&&e.jsx("div",{className:"card-actions",children:e.jsx("div",{className:"card-click-hint",children:v?"Waiting for timer to reset...":"Click card to select"})})]})]})]},`${i}-${n}-${V[n]||0}`),o===null&&e.jsx("div",{className:"card-reroll-section",children:e.jsx("button",{onClick:()=>oe(n),disabled:!Z,className:"reroll-button",title:Z?`${h} re-roll${h!==1?"s":""} left`:`No re-roll${h!==1?"s":""} left. Next selection in ${z($)}`,children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),e.jsx("path",{d:"M3 21v-5h5"})]})})})]},`card-wrapper-${i}-${n}`))]})]})}function se(s){return s.toLowerCase().replace(/^https?:\/\//i,"").replace(/\/.*$/,"").replace(/^www\./i,"").trim()}function me({settings:s,onSave:c}){const[R,m]=u.useState(""),x=async()=>{const a=R.trim().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!a)return;const o=se(a);if(s.blockedHosts.some(h=>se(h)===o))return;const i={...s.domainDurations||{}};i[a]||(i[a]=[]),[10,15,20,25,30].forEach(h=>{i[a].includes(h)||i[a].push(h)}),i[a].sort((h,y)=>h-y),await c({...s,blockedHosts:[...s.blockedHosts,a],domainDurations:i}),m("")},b=async a=>{const o={...s.domainDurations||{}};delete o[a],await c({...s,blockedHosts:s.blockedHosts.filter(d=>d!==a),domainDurations:o})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Blocked sites"}),e.jsxs("div",{className:"row",children:[e.jsx("input",{placeholder:"e.g. twitter.com",value:R,onChange:a=>m(a.target.value)}),e.jsx("button",{onClick:x,children:"Add"})]}),e.jsx("ul",{className:"host-list",children:s.blockedHosts.map(a=>{const o=(s.domainDurations||{})[a]||[];return e.jsxs("li",{className:"host-item",children:[e.jsxs("div",{className:"host-header",children:[e.jsx("span",{className:"host-name",children:a}),e.jsx("button",{onClick:()=>b(a),children:"remove"})]}),e.jsxs("div",{className:"durations-section",children:[e.jsx("label",{className:"durations-label",children:"Unblock durations (minutes):"}),e.jsxs("div",{className:"durations-list",children:[o.map((d,i)=>e.jsxs("span",{className:"duration-tag",children:[d," min",e.jsx("button",{className:"duration-remove",onClick:async()=>{const T={...s.domainDurations||{}};T[a]=o.filter((h,y)=>y!==i),T[a].length===0&&delete T[a],await c({...s,domainDurations:T})},children:"Ã—"})]},i)),e.jsx("input",{type:"number",min:"1",placeholder:"Add duration",className:"duration-input",onKeyDown:async d=>{if(d.key==="Enter"){const i=d.currentTarget,T=parseInt(i.value);if(T>0){const h={...s.domainDurations||{}};h[a]||(h[a]=[]),h[a].includes(T)||(h[a]=[...h[a],T],h[a].sort((y,f)=>y-f),await c({...s,domainDurations:h})),i.value=""}}}})]})]})]},a)})})]})}const he=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function fe({settings:s,onSave:c}){const m=(s.mode||"scheduled")==="focus",x=async()=>{const o={day:1,start:"09:00",end:"17:00"};await c({...s,windows:[...s.windows,o]})},b=async(o,d)=>{const i=s.windows.slice();i[o]={...i[o],...d},await c({...s,windows:i})},a=async o=>{const d=s.windows.slice();d.splice(o,1),await c({...s,windows:d})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Time windows"}),m&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#f0f0f0",borderRadius:"8px",color:"#666",marginBottom:"12px"},children:"Time windows are disabled. Focus timer is active."}),e.jsx("button",{onClick:x,disabled:m,children:"Add window"}),s.windows.map((o,d)=>e.jsxs("div",{className:"card",children:[e.jsxs("label",{children:["Day:",e.jsx("select",{value:o.day,onChange:i=>b(d,{day:Number(i.target.value)}),disabled:m,children:he.map((i,T)=>e.jsx("option",{value:T,children:i},T))})]}),e.jsxs("label",{children:["Start:",e.jsx("input",{type:"time",value:o.start,onChange:i=>b(d,{start:i.target.value}),disabled:m})]}),e.jsxs("label",{children:["End:",e.jsx("input",{type:"time",value:o.end,onChange:i=>b(d,{end:i.target.value}),disabled:m})]}),e.jsx("button",{onClick:()=>a(d),disabled:m,children:"remove"})]},d))]})}function pe({settings:s,onSave:c}){return e.jsxs("section",{children:[e.jsx("h2",{children:"Master switch"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:R=>c({...s,enabled:R.target.checked})}),"Enabled"]})]})}function xe({onReset:s}){const c=async()=>{confirm("Reset all settings to defaults? This cannot be undone.")&&(await p.sync.remove("settings"),await s())};return e.jsxs("section",{children:[e.jsx("h2",{children:"Reset"}),e.jsx("button",{onClick:c,className:"reset-button",children:"Reset to Defaults"}),e.jsx("p",{className:"reset-description",children:"This will clear all saved settings and restore defaults."})]})}function ge({settings:s,onSave:c}){const[R,m]=u.useState(s.focusTimeHours||2),[x,b]=u.useState(null),a=u.useRef(!1),o=s.mode||"scheduled";u.useEffect(()=>{s.focusTimeHours&&m(s.focusTimeHours)},[s.focusTimeHours]),u.useEffect(()=>{let f=null;if(o==="focus"){if(a.current=!!(s.focusTimePaused&&s.focusTimePaused>0),s.focusTimePaused&&s.focusTimePaused>0)return b(s.focusTimePaused),()=>{f&&clearInterval(f)};if(s.focusTimeEnd&&!s.focusTimePaused){const j=()=>{if(a.current){f&&clearInterval(f);return}const C=Date.now(),E=Math.max(0,s.focusTimeEnd-C);b(E),E===0&&c({...s,mode:"scheduled",focusTimeEnd:void 0})};return j(),f=setInterval(j,1e3),()=>{f&&clearInterval(f)}}else b(null)}else a.current=!1,b(null);return()=>{f&&clearInterval(f)}},[o,s.focusTimeEnd,s.focusTimePaused,s,c]);const d=async()=>{const f=Date.now(),j=R*60*60*1e3,C=f+j;await c({...s,mode:"focus",focusTimeHours:R,focusTimeEnd:C})},i=async()=>{await c({...s,mode:"scheduled",focusTimeEnd:void 0})},T=f=>{const j=Math.floor(f/1e3),C=Math.floor(j/3600),E=Math.floor(j%3600/60),$=j%60;return C>0?`${C}:${E.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`:`${E}:${$.toString().padStart(2,"0")}`},h=o==="focus"&&(s.focusTimeEnd||s.focusTimePaused)&&x!==null&&x>0,y=o==="focus"&&s.focusTimePaused&&!s.focusTimeEnd;return e.jsxs("section",{children:[e.jsx("h2",{children:"Focus Timer"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("input",{type:"radio",name:"mode",checked:o==="focus",onChange:()=>c({...s,mode:"focus"})}),e.jsx("span",{children:"Use Focus Timer"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"radio",name:"mode",checked:o==="scheduled",onChange:()=>c({...s,mode:"scheduled",focusTimeEnd:void 0})}),e.jsx("span",{children:"Use Scheduled Working Hours"})]})]}),o==="focus"&&e.jsx("div",{className:"card",style:{gridTemplateColumns:"1fr",padding:"16px"},children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",textAlign:"center",marginBottom:"12px"},children:T(x)}),e.jsx("div",{style:{textAlign:"center",color:"#666",marginBottom:"12px"},children:y?e.jsx(e.Fragment,{children:"Focus time paused - card timer is active"}):e.jsx(e.Fragment,{children:"Focus time active - blocked sites are being blocked"})}),!y&&e.jsx("button",{onClick:i,style:{backgroundColor:"#ff4444",color:"white"},children:"Stop Focus Time"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("label",{children:["Hours to focus:",e.jsx("input",{type:"number",min:"0.5",max:"24",step:"0.5",value:R,onChange:f=>m(parseFloat(f.target.value)||2),style:{width:"100px",marginLeft:"8px"}})]}),e.jsx("button",{onClick:d,style:{marginTop:"8px"},children:"Start Focus Time"})]})}),o==="scheduled"&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#f0f0f0",borderRadius:"8px",color:"#666"},children:"Focus timer is disabled. Using scheduled working hours instead."})]})}const B="settings";function we(){const[s,c]=u.useState(_),[R,m]=u.useState(0);u.useEffect(()=>{if((async()=>{const{[B]:o}=await p.sync.get(B);c({..._,...o||{}})})(),p.onChanged){const o=(d,i)=>{if(i==="sync"&&d[B]){const T=d[B].newValue;T&&c({..._,...T})}};return p.onChanged.addListener(o),()=>{p.onChanged&&"removeListener"in p.onChanged&&p.onChanged.removeListener(o)}}},[]);const x=async a=>{c(a),await p.sync.set({[B]:a})},b=async()=>{c(_),m(a=>a+1);try{await k.sendMessage({action:"clearTemporaryUnblocks"})}catch(a){console.error("Error clearing temporary unblocks:",a)}};return e.jsxs("div",{className:"p",children:[e.jsx(ge,{settings:s,onSave:x}),e.jsx("h1",{children:"Blocker Options"}),s.blockedHosts.length>0&&e.jsx("section",{children:e.jsx(ue,{domains:s.blockedHosts,domainDurations:s.domainDurations||{},resetKey:R})}),e.jsx(me,{settings:s,onSave:x}),e.jsx(fe,{settings:s,onSave:x}),e.jsx(pe,{settings:s,onSave:x}),e.jsx(xe,{onReset:b})]})}ie.createRoot(document.getElementById("root")).render(e.jsx(we,{}));
//# sourceMappingURL=options.js.map
